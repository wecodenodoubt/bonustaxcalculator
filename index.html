<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Why is my bonus taxed so much? Use our free AI-Enhanced Bonus Tax Calculator for USA, UK, and Canada to estimate your take-home pay and get smart tax-saving tips.">
    <meta name="keywords" content="Bonus Tax Calculator, Why is my bonus taxed so much, Supplemental Wage Tax, Bonus tax USA, Bonus tax UK, Bonus tax Canada, AI Tax Calculator">
    <title>AI Bonus Tax Calculator â€“ Smart Estimates & Insights</title>
    
    <!-- Structured Data for FAQ (SEO Gold) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Why is my bonus taxed more than my salary?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Bonuses are often considered 'supplemental income.' In the USA, they are withheld at a flat 22% federal rate. In the UK and Canada, payroll software may annualize the bonus, temporarily pushing you into a higher tax bracket for that pay period."
        }
      }, {
        "@type": "Question",
        "name": "Will I get the extra bonus tax back?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Likely, yes. Withholding is not the same as tax liability. If the amount withheld exceeds your actual annual tax rate, you will receive the difference as a tax refund when you file your annual return."
        }
      }]
    }
    </script>

    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --primary: #2563eb; /* Modern Blue */
            --primary-dark: #1e40af;
            --secondary: #0f172a; /* Slate */
            --accent: #10b981; /* Success Green */
            --accent-glow: rgba(16, 185, 129, 0.2);
            --bg-light: #f1f5f9;
            --white: #ffffff;
            --border: #e2e8f0;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 30px -5px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-light);
            color: var(--secondary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* --- LAYOUT UTILITIES --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section {
            margin-bottom: 30px;
            padding: 30px;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
        }

        /* --- TYPOGRAPHY --- */
        h1, h2, h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            line-height: 1.3;
            font-weight: 700;
        }

        h1 {
            font-size: 2.5rem;
            text-align: center;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            letter-spacing: -0.02em;
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 10px;
            border-bottom: 2px solid var(--bg-light);
            padding-bottom: 10px;
        }

        h3 {
            font-size: 1.1rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 800;
        }

        p {
            margin-bottom: 15px;
            color: #475569;
        }

        .subtitle {
            text-align: center;
            color: #64748b;
            font-size: 1.125rem;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .highlight {
            background-color: #dbeafe;
            color: var(--primary-dark);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        ul {
            margin-left: 20px;
            margin-bottom: 20px;
            color: #475569;
        }

        li {
            margin-bottom: 8px;
        }

        /* --- HERO & CALCULATOR --- */
        .hero {
            padding: 60px 0 40px 0;
            background: linear-gradient(to bottom, #ffffff, var(--bg-light));
        }

        .calculator-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 40px;
            box-shadow: var(--shadow-lg);
            max-width: 550px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .ai-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #6366f1, #a855f7);
            color: white;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
            box-shadow: 0 4px 10px rgba(168, 85, 247, 0.3);
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: #f8fafc;
            padding: 6px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .tab-btn {
            flex: 1;
            padding: 10px 15px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-weight: 600;
            color: #64748b;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        .tab-btn.active {
            background: var(--white);
            color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
            font-size: 0.9rem;
        }

        .input-wrapper {
            position: relative;
        }

        .currency-symbol {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-weight: bold;
        }

        input[type="number"], select {
            width: 100%;
            padding: 14px 15px 14px 35px;
            font-size: 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            outline: none;
            transition: border-color 0.2s, box-shadow 0.2s;
            background: #f8fafc;
        }

        input:focus, select:focus {
            border-color: var(--primary);
            background: var(--white);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }

        .calc-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            border: none;
            border-radius: var(--radius);
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .calc-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }

        .calc-btn:active {
            transform: translateY(0);
        }

        /* --- LOADING & AI PROCESSING --- */
        .processing-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            border-radius: var(--radius);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .processing-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        .ai-text {
            font-weight: 600;
            color: var(--secondary);
            font-size: 0.9rem;
            animation: pulse 1.5s infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        /* --- RESULTS AREA --- */
        .results-area {
            margin-top: 30px;
            display: none; /* Hidden by default */
            animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-card {
            background: #f8fafc;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 0.95rem;
            color: #64748b;
        }

        .result-row.total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed var(--border);
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--secondary);
            align-items: center;
        }

        .result-row.deduction {
            color: #ef4444;
        }

        /* --- AI INSIGHT BOX --- */
        .ai-insight-box {
            background: linear-gradient(to right, #f0fdf4, #ffffff);
            border: 1px solid #bbf7d0;
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 8px;
            margin-top: 25px;
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: #166534;
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
        }
        
        .ai-content {
            font-size: 0.95rem;
            color: #15803d;
        }

        .disclaimer-small {
            font-size: 0.75rem;
            color: #94a3b8;
            text-align: center;
            margin-top: 20px;
        }

        /* --- EXTRAS --- */
        .ad-placeholder {
            width: 100%;
            height: 100px;
            background-color: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #cbd5e1;
            font-size: 0.8rem;
            margin: 30px 0;
            border: 1px dashed #cbd5e1;
            border-radius: var(--radius);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .trust-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            color: #64748b;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .badge-item {
            display: flex;
            align-items: center;
        }
        
        .badge-item svg {
            margin-right: 6px;
            width: 16px;
            height: 16px;
            fill: var(--accent);
        }

        /* --- FAQ & ACCORDION --- */
        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 20px 0;
        }
        
        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-weight: 600;
            cursor: pointer;
            position: relative;
            padding-right: 30px;
            color: var(--secondary);
            transition: color 0.2s;
        }

        .faq-question:hover {
            color: var(--primary);
        }

        .faq-question::after {
            content: '+';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 1.2rem;
            font-weight: 400;
        }

        .faq-answer {
            margin-top: 12px;
            font-size: 0.95rem;
            display: none;
            color: #475569;
            line-height: 1.7;
        }

        .faq-item.active .faq-answer {
            display: block;
        }
        
        .faq-item.active .faq-question::after {
            content: 'âˆ’';
        }

        footer {
            background: var(--secondary);
            color: #94a3b8;
            padding: 50px 0;
            text-align: center;
            margin-top: 60px;
        }

        footer a {
            color: #e2e8f0;
            text-decoration: none;
            margin: 0 15px;
            font-size: 0.9rem;
            transition: color 0.2s;
        }
        
        footer a:hover {
            color: var(--white);
        }

        /* --- MOBILE --- */
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .section { padding: 20px; }
            .calculator-card { padding: 25px; }
            .tabs { flex-wrap: wrap; }
            .tab-btn { flex: 1 1 30%; font-size: 0.85rem; text-align: center; }
        }
    </style>
</head>
<body>

    <!-- HERO SECTION -->
    <header class="hero">
        <div class="container">
            <h1>Bonus Tax Calculator</h1>
            <p class="subtitle">Find out why your bonus was taxed so much. <br>Instant AI-Powered estimates for USA, UK, and Canada.</p>
            
            <div class="calculator-card">
                <div class="ai-badge">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z" /></svg>
                    AI Enhanced
                </div>

                <div class="tabs">
                    <button class="tab-btn active" onclick="setCountry('usa')">ðŸ‡ºðŸ‡¸ USA</button>
                    <button class="tab-btn" onclick="setCountry('uk')">ðŸ‡¬ðŸ‡§ UK</button>
                    <button class="tab-btn" onclick="setCountry('canada')">ðŸ‡¨ðŸ‡¦ Canada</button>
                </div>

                <div class="input-group">
                    <label for="bonus-amount">Bonus Amount (Gross)</label>
                    <div class="input-wrapper">
                        <span class="currency-symbol" id="currency-symbol">$</span>
                        <input type="number" id="bonus-amount" placeholder="e.g. 5000">
                    </div>
                </div>

                <!-- UK Specific Input -->
                <div class="input-group" id="uk-tax-band" style="display: none;">
                    <label for="uk-band">Current Tax Band</label>
                    <select id="uk-band-select">
                        <option value="basic">Basic Rate (20%)</option>
                        <option value="higher">Higher Rate (40%)</option>
                        <option value="additional">Additional Rate (45%)</option>
                    </select>
                </div>

                <!-- Canada Specific Input -->
                <div class="input-group" id="ca-province" style="display: none;">
                    <label for="province-select">Province (Est. Average)</label>
                    <select id="province-select">
                        <option value="low">Low Tax (e.g., AB, NU)</option>
                        <option value="avg" selected>Average (e.g., BC, ON)</option>
                        <option value="high">High Tax (e.g., QC, NS)</option>
                    </select>
                </div>

                <button class="calc-btn" onclick="startCalculation()">
                    <span>Analyze & Calculate</span>
                </button>

                <!-- PROCESS OVERLAY -->
                <div class="processing-overlay" id="processing">
                    <div class="spinner"></div>
                    <div class="ai-text" id="ai-status">Analyzing Tax Brackets...</div>
                </div>

                <!-- RESULTS -->
                <div class="results-area" id="results">
                    <div class="result-card">
                        <div class="result-row">
                            <span>Gross Bonus:</span>
                            <span id="res-gross">0</span>
                        </div>
                        <div class="result-row deduction">
                            <span>Estimated Withholding:</span>
                            <span id="res-tax">0</span>
                        </div>
                        <div class="result-row total">
                            <span>Net Take-Home Pay:</span>
                            <span id="res-net" style="color: var(--primary);">0</span>
                        </div>
                    </div>

                    <!-- AI INSIGHT -->
                    <div class="ai-insight-box">
                        <div class="ai-header">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z" /></svg>
                            Smart Tax Strategy
                        </div>
                        <div class="ai-content" id="ai-message">
                            <!-- Dynamic Content Here -->
                        </div>
                    </div>

                    <p class="disclaimer-small">*Estimates only. Actual withholding varies by specific local laws, payroll software settings, and filing status.</p>
                </div>
                
                <div class="trust-badges">
                    <div class="badge-item">
                        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                        Free & Instant
                    </div>
                    <div class="badge-item">
                        <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
                        SSL Secure
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- AD PLACEMENT -->
    <div class="container">
        <div class="ad-placeholder">Advertisement Space</div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="container">
        
        <!-- EXPLANATION SECTION -->
        <section class="section">
            <h2>Why Is My Bonus Taxed So Much?</h2>
            <p>It is one of the most frustrating moments for an employee: you work hard, earn a $5,000 bonus, and when the check arrives, it looks more like $3,000. <strong>You didn't actually lose that money forever</strong>, but the tax withholding rules make it feel that way.</p>
            <p>The "Bonus Tax" isn't usually a separate tax. It is simply a different method of <strong>withholding</strong> by your employer. Payroll systems generally assume that if you received a large check this week, you will earn that much <em>every</em> week, which artificially pushes you into a much higher estimated tax bracket.</p>
            
            <h3>The 3 Main Reasons It Feels High:</h3>
            <ul>
                <li><strong>Supplemental Rates:</strong> Many countries allow employers to use a flat "safe" percentage (like 22% federal in the USA) plus social security, which adds up fast.</li>
                <li><strong>The Annualization Method:</strong> Payroll software multiplies your bonus by the number of pay periods in a year, assumes you are now rich, and taxes the check at the highest marginal rate.</li>
                <li><strong>Combined Deductions:</strong> When you add State/Provincial tax, Student Loans, and Retirement contributions on top of the "Supplemental Rate," deductions can easily hit 40-50%.</li>
            </ul>
        </section>

        <!-- COUNTRY BREAKDOWNS -->
        <section class="section">
            <h2 id="usa-tax">ðŸ‡ºðŸ‡¸ Bonus Tax in the USA</h2>
            <p>The IRS considers bonuses "supplemental wages." Employers typically use the <strong>Percentage Method</strong>, withholding a flat <strong>22% for Federal Income Tax</strong> on bonuses under $1 million.</p>
            <p>However, that 22% is just the start. You must add:</p>
            <ul>
                <li><strong>Social Security:</strong> 6.2%</li>
                <li><strong>Medicare:</strong> 1.45%</li>
                <li><strong>State Taxes:</strong> 0% to 13% (depending on where you live).</li>
            </ul>
            <p><strong>Total Impact:</strong> Most Americans see about <strong>30% to 40%</strong> withheld from their bonus checks.</p>

            <div class="ad-placeholder">Advertisement Space</div>

            <h2 id="uk-tax">ðŸ‡¬ðŸ‡§ Bonus Tax in the UK</h2>
            <p>In the UK, bonuses are treated as regular income. However, they are often subject to <span class="highlight">PAYE (Pay As You Earn)</span> calculations that can be aggressive.</p>
            <p>If your bonus pushes your monthly pay above the threshold for the <strong>Higher Rate (40%)</strong>, the entire chunk above that line is taxed at 40%, plus <strong>National Insurance</strong> contributions (usually 2% in the higher band, or higher in the basic band).</p>
            <p>Many people also suffer from "Month 1" tax codes temporarily, where the system forgets your tax-free allowance has already been applied.</p>

            <h2 id="canada-tax">ðŸ‡¨ðŸ‡¦ Bonus Tax in Canada</h2>
            <p> The Canada Revenue Agency (CRA) requires employers to use the <span class="highlight">Bonus Method</span>. This is complex, but essentially, it annualizes the bonus to determine the marginal tax rate.</p>
            <p>Because Canada has high provincial marginal rates, a bonus can easily be withheld at <strong>40% to 53%</strong> depending on the province (Quebec and Nova Scotia often being higher).</p>
        </section>

        <!-- ACTIONABLE ADVICE -->
        <section class="section" style="border-left: 5px solid var(--accent);">
            <h3>Will I Get This Money Back?</h3>
            <p><strong>Yes, in most cases.</strong> Withholding is just an estimate. Your actual tax liability is calculated at the end of the year based on your <em>total</em> annual income.</p>
            <p>If your employer withheld 40% on your bonus, but your actual effective tax rate for the year is only 24%, <strong>you will get the difference back as a tax refund</strong> when you file your annual return.</p>
            <p><strong>Pro Tip:</strong> If you know you will be over-taxed, consider asking your employer if they can deposit the bonus directly into a 401(k) or RRSP (Canada) to bypass the withholding entirely.</p>
        </section>

        <!-- FAQ SECTION -->
        <section class="section">
            <h2>Frequently Asked Questions</h2>
            <div class="faq-list">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">Is my bonus taxed at a higher rate than my salary?</div>
                    <div class="faq-answer">Technically, no. It is <em>withheld</em> at a higher rate, but it is <em>taxed</em> as ordinary income. At the end of the year, a dollar of bonus is treated exactly the same as a dollar of salary.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">Can I ask my employer to tax my bonus less?</div>
                    <div class="faq-answer">Generally, no. Employers are legally required to follow strict IRS/HMRC/CRA withholding tables. They cannot simply choose to tax you less to be nice.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">Does the Aggregate Method hurt more?</div>
                    <div class="faq-answer">Yes. If your employer combines your bonus with your regular paycheck and taxes the total sum (Aggregate Method), it looks like you make a massive salary, triggering much higher withholding brackets than the flat percentage method.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">How accurate is this calculator?</div>
                    <div class="faq-answer">This tool provides an estimate based on standard supplemental withholding rates and average tax brackets. It does not account for specific local city taxes, student loan garnishments, or 401k deductions.</div>
                </div>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <p style="margin-bottom: 20px; color: #cbd5e1;"><strong>Disclaimer:</strong> This website provides general information and estimates only. We are not a financial institution or tax advisory firm. Tax laws vary by location and personal situation. Please consult a certified accountant for professional advice.</p>
            <p style="margin-top: 20px; font-size: 0.8rem;">&copy; 2023-2024 BonusTaxCalc. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // --- CONFIGURATION ---
        let currentCountry = 'usa';
        const currencySymbols = { usa: '$', uk: 'Â£', canada: '$' };

        // --- DOM ELEMENTS ---
        const bonusInput = document.getElementById('bonus-amount');
        const ukDiv = document.getElementById('uk-tax-band');
        const caDiv = document.getElementById('ca-province');
        const symbolSpan = document.getElementById('currency-symbol');
        const resultsArea = document.getElementById('results');
        const processingOverlay = document.getElementById('processing');
        const aiStatus = document.getElementById('ai-status');
        const aiMessage = document.getElementById('ai-message');

        // --- TAB SWITCHING LOGIC ---
        function setCountry(country) {
            currentCountry = country;
            
            // UI Updates
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            symbolSpan.innerText = currencySymbols[country];
            resultsArea.style.display = 'none'; // Hide old results

            // Toggle specific inputs
            ukDiv.style.display = (country === 'uk') ? 'block' : 'none';
            caDiv.style.display = (country === 'canada') ? 'block' : 'none';
        }

        // --- AI PROCESSING SIMULATION ---
        function startCalculation() {
            const amount = parseFloat(bonusInput.value);
            if (!amount || amount <= 0) {
                alert("Please enter a valid bonus amount.");
                return;
            }

            // Start Animation
            resultsArea.style.display = 'none';
            processingOverlay.classList.add('active');
            
            // Sequence of statuses to simulate "thinking"
            const statuses = ["Analyzing Tax Brackets...", "Checking Local Withholding Rules...", "Generating Smart Insights..."];
            let step = 0;

            const interval = setInterval(() => {
                if(step < statuses.length) {
                    aiStatus.innerText = statuses[step];
                    step++;
                }
            }, 500);

            // Finish after 1.5 seconds
            setTimeout(() => {
                clearInterval(interval);
                processingOverlay.classList.remove('active');
                calculateTax(amount);
            }, 1500);
        }

        // --- MAIN LOGIC ---
        function calculateTax(amount) {
            let taxRate = 0;
            let taxAmount = 0;
            let netAmount = 0;
            let aiTip = "";

            if (currentCountry === 'usa') {
                // USA LOGIC
                const fedRate = 0.22;
                const ficaRate = 0.0765;
                const avgState = 0.05; 
                taxRate = fedRate + ficaRate + avgState;
                
                // USA Specific AI Insight
                if (amount > 1000000) {
                     aiTip = "<strong>High Earner Alert:</strong> Since your bonus exceeds $1 million, the federal withholding rate jumps to 37%.";
                } else {
                     const estimatedSavings = Math.round(amount * 0.22);
                     aiTip = `<strong>Did you know?</strong> If you deposit this $${amount.toLocaleString()} into a Traditional 401(k), you could defer paying ~$${estimatedSavings.toLocaleString()} in federal taxes right now.`;
                }
                
            } else if (currentCountry === 'uk') {
                // UK LOGIC
                const band = document.getElementById('uk-band-select').value;
                if (band === 'basic') {
                    taxRate = 0.28;
                    aiTip = "<strong>Smart Tip:</strong> You are in the Basic Rate band. If this bonus pushes you into the Higher Rate threshold (over Â£50,270/yr), consider a 'Salary Sacrifice' into your pension to keep the full value tax-efficient.";
                }
                else if (band === 'higher') {
                    taxRate = 0.42;
                    aiTip = "<strong>Tax Trap Alert:</strong> At the 40% rate, almost half your bonus goes to HMRC. Contributing this bonus to your pension could reclaim that 40% tax relief immediately.";
                }
                else {
                    taxRate = 0.47;
                    aiTip = "<strong>Efficiency Tip:</strong> You are losing nearly 50% to tax. Speak to an accountant about VCTs or increasing pension contributions to lower your taxable income.";
                }

            } else if (currentCountry === 'canada') {
                // CANADA LOGIC
                const prov = document.getElementById('province-select').value;
                
                if (prov === 'low') {
                    taxRate = 0.30;
                    aiTip = "<strong>RRSP Strategy:</strong> You have a lower provincial rate, but putting this bonus into an RRSP can still trigger a refund next year if your marginal rate is lower than the withholding rate.";
                }
                else if (prov === 'avg') {
                    taxRate = 0.38; 
                    const rrspSave = Math.round(amount * 0.38);
                    aiTip = `<strong>Maximize Your Refund:</strong> If you have RRSP room, contributing this bonus could generate a tax refund of approximately $${rrspSave.toLocaleString()} next spring.`;
                }
                else {
                    taxRate = 0.46;
                    aiTip = "<strong>High Tax Alert:</strong> You are in a high-tax province. The 'Bonus Method' calculation is aggressive here. Expect a refund at tax time, OR ask your employer to direct deposit straight to your RRSP to waive the tax at source.";
                }
            }

            // Calculate
            taxAmount = amount * taxRate;
            netAmount = amount - taxAmount;

            // Display Results
            document.getElementById('res-gross').innerText = formatCurrency(amount);
            document.getElementById('res-tax').innerText = formatCurrency(taxAmount);
            document.getElementById('res-net').innerText = formatCurrency(netAmount);
            
            // Set AI Message
            aiMessage.innerHTML = aiTip;
            
            resultsArea.style.display = 'block';
        }

        function formatCurrency(num) {
            return currencySymbols[currentCountry] + num.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
        }

        // --- FAQ TOGGLE ---
        function toggleFaq(element) {
            const parent = element.parentElement;
            parent.classList.toggle('active');
        }
    </script>
    <footer style="margin-top:40px; padding:20px; text-align:center; font-size:14px; background:#f5f5f5;">
  <a href="about-us.html">About Us</a> |
  <a href="privacy-policy.html">Privacy Policy</a> |
  <a href="contact-us.html">Contact Us</a>
  <p style="margin-top:10px;">Â© 2025 Bonus Tax Calculator. All rights reserved.</p>
</footer>

</body>
</html>
